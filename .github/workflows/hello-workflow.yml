name: Hello
on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - run: ls -al ${{ github.workspace }}

    - name: save context
      run: echo ${GITHUB_CONTEXT} > /tmp/context.json
      env:
        REF: ${{ github.ref }}
        GITHUB_CONTEXT: ${{ toJson(github) }}
    - name: read context
      run: cat /tmp/context.json

    - run: echo ${GITHUB_REF}
    - name: save ref
      run: echo ${REF#refs/*/} > /tmp/ref.txt
      env:
        REF: ${{ github.ref }}
    - name: read ref
      run: cat /tmp/ref.txt

    - name: Use "quote" 'and' `symbols`.
      run: echo nop

    - name: Create a new release
      run: sed -e "s!PLACEHOLDER_TAG_NAME!${GITHUB_REF#refs/*/}!g" release-template.json > /tmp/release.json
    - run: cat /tmp/release.json
    - run: curl -X POST "https://api.github.com/repos/${GITHUB_REPOSITORY}/releases"
